---
description: LIFF å‰ç«¯é–‹ç™¼è¦ç¯„ï¼ŒåŒ…å« JavaScriptã€HTML å’Œ CSS æœ€ä½³å¯¦è¸
globs: frontend/**/*.{js,html,css}
alwaysApply: false
---

# LIFF å‰ç«¯é–‹ç™¼è¦ç¯„

## âœ… æ ¸å¿ƒåŸå‰‡

1. **ä½¿ç”¨ Vanilla JavaScript**ï¼Œä¸å¼•å…¥é¡å¤–æ¡†æ¶ï¼ˆä¿æŒè¼•é‡ï¼‰
2. **éŸ¿æ‡‰å¼è¨­è¨ˆ**ï¼Œå„ªå…ˆè€ƒæ…®æ‰‹æ©Ÿç‰ˆé¢
3. **æ‰€æœ‰ LIFF API å‘¼å«å¿…é ˆåŒ…å«éŒ¯èª¤è™•ç†**
4. **Loading ç‹€æ…‹å¿…é ˆæœ‰è¦–è¦ºæç¤º**

## ğŸ”Œ LIFF API ä½¿ç”¨

### æ­£ç¢ºçš„éŒ¯èª¤è™•ç†

```javascript
// âŒ BAD - æ²’æœ‰éŒ¯èª¤è™•ç†
async function initLIFF() {
  await liff.init({ liffId: CONFIG.LIFF_ID });
  const userId = liff.getContext().userId;
}

// âœ… GOOD - å®Œæ•´çš„éŒ¯èª¤è™•ç†
async function initLIFF() {
  try {
    await liff.init({ liffId: CONFIG.LIFF_ID });
    
    if (!liff.isInClient() && !liff.isLoggedIn()) {
      liff.login();
      return null;
    }
    
    const context = liff.getContext();
    if (!context || !context.userId) {
      throw new Error('ç„¡æ³•ç²å–ç”¨æˆ¶ID');
    }
    
    return context.userId;
  } catch (error) {
    console.error('LIFF åˆå§‹åŒ–å¤±æ•—:', error);
    showError('åˆå§‹åŒ–å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
    throw error;
  }
}
```

### Loading ç‹€æ…‹

```javascript
// âœ… GOOD - é¡¯ç¤º Loading
function showPage(pageName) {
  // éš±è—æ‰€æœ‰é é¢
  document.querySelectorAll('.page').forEach(page => {
    page.style.display = 'none';
  });
  
  // é¡¯ç¤ºç›®æ¨™é é¢
  const targetPage = document.getElementById(`page-${pageName}`);
  targetPage.style.display = 'flex';
  targetPage.classList.add('fade-in');
}

// ä½¿ç”¨ Loading
showPage('processing'); // é¡¯ç¤º loading é é¢
await submitData();
showPage('result'); // é¡¯ç¤ºçµæœ
```

## ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆ

### CSS æœ€ä½³å¯¦è¸

```css
/* âœ… GOOD - æ‰‹æ©Ÿå„ªå…ˆ */
.container {
  max-width: 500px;
  margin: 0 auto;
  padding: 20px;
}

/* æ¡Œé¢ç‰ˆï¼ˆå¯é¸ï¼‰ */
@media (min-width: 768px) {
  .container {
    padding: 40px;
  }
}

/* âŒ BAD - å›ºå®šå¯¬åº¦ */
.container {
  width: 500px; /* æ‰‹æ©Ÿä¸Šæœƒæº¢å‡º */
}
```

## ğŸ¨ ç”¨æˆ¶é«”é©—

### å‹å–„çš„éŒ¯èª¤è¨Šæ¯

```javascript
// âŒ BAD - æŠ€è¡“æ€§éŒ¯èª¤è¨Šæ¯
catch (error) {
  alert(error.message); // "Network request failed"
}

// âœ… GOOD - å‹å–„çš„ç¹é«”ä¸­æ–‡è¨Šæ¯
catch (error) {
  console.error('API å‘¼å«å¤±æ•—:', error);
  showError('ç³»çµ±æš«æ™‚ç„¡æ³•è™•ç†ï¼Œè«‹ç¨å¾Œå†è©¦');
}
```

### å³æ™‚é©—è­‰

```javascript
// âœ… GOOD - å³æ™‚é©—è­‰æ•¸å­—è¼¸å…¥
numbersInput.addEventListener('input', () => {
  const validation = validateNumbers(numbersInput.value);
  const validationEl = document.getElementById('number-validation');
  
  if (validation.valid) {
    validationEl.textContent = 'âœ… æ ¼å¼æ­£ç¢º';
    validationEl.className = 'validation-message success';
    submitButton.disabled = false;
  } else {
    validationEl.textContent = validation.error || '';
    validationEl.className = 'validation-message error';
    submitButton.disabled = true;
  }
});
```

## ğŸ”’ é˜²å‘†æ©Ÿåˆ¶

### é˜²æ­¢é‡è¤‡æäº¤

```javascript
// âœ… GOOD - æäº¤å¾Œç¦ç”¨æŒ‰éˆ•
async function submitDivination() {
  const submitButton = document.getElementById('btn-submit');
  
  // ç¦ç”¨æŒ‰éˆ•
  submitButton.disabled = true;
  
  try {
    showPage('processing');
    const result = await API.submitDivination(data);
    showPage('result');
    renderResult(result);
  } catch (error) {
    showError(error.message);
    // éŒ¯èª¤æ™‚é‡æ–°å•Ÿç”¨æŒ‰éˆ•
    submitButton.disabled = false;
  }
}
```
