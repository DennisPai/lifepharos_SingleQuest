<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>象棋卜卦 - 單一問題抽卦</title>
    <link rel="stylesheet" href="css/style.css">
    <!-- LIFF SDK -->
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
    <div id="app" class="container">
        <!-- 檢查頁面 -->
        <div id="page-checking" class="page" style="display: none;">
            <div class="loading-container">
                <div class="spinner"></div>
                <p class="loading-text">正在檢查資料...</p>
            </div>
        </div>

        <!-- 輸入問題頁面 -->
        <div id="page-input-question" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">📝 請輸入您的問題</h1>
                <div class="divider"></div>
            </div>
            <div class="page-content">
                <div class="question-tips" style="background-color: #F5F5F5; padding: 15px; border-radius: 8px; margin-bottom: 15px; font-size: 14px; line-height: 1.6;">
                    <p style="margin: 0 0 10px 0; font-weight: bold; color: #3B6E98;">※ 問題需要有明確答案或方向</p>
                    <p style="margin: 5px 0; color: #333;">✔️ 請問我跟某某某的相處如何？</p>
                    <p style="margin: 5px 0; color: #333;">✔️ 請問這個工作對我有沒有利？</p>
                    <p style="margin: 5px 0; color: #999;">❌ 請問我之後適合做什麼？</p>
                </div>
                <textarea
                    id="input-question"
                    class="input-field"
                    placeholder="請輸入您想問的問題..."
                    maxlength="30"
                    rows="3"
                ></textarea>
                <p class="char-counter">
                    <span id="char-count">0</span>/30
                </p>
                <button id="btn-next-question" class="btn btn-primary" disabled>下一步</button>
            </div>
        </div>

        <!-- 輸入數字頁面 -->
        <div id="page-input-numbers" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">🎲 請選擇 5 個數字</h1>
                <div class="divider"></div>
            </div>
            <div class="page-content" style="gap: 8px;">
                <p class="meditation-text" style="text-align: center; margin-bottom: 3px; color: #333; font-size: 15px; line-height: 1.3;">
                    深呼吸三次，讓自己沉靜下來
                </p>
                <p class="prayer-text" style="text-align: center; margin-bottom: 8px; color: #3B6E98; font-size: 14px; font-weight: bold; line-height: 1.3;">
                    心裡默念：指導靈/神明，請問<span id="question-reminder"></span>
                </p>
                
                <!-- 顯示棋盤圖片 -->
                <div class="chessboard-container" style="text-align: center; margin: 8px 0;">
                    <img src="https://fateforge.lifepharos.com/wp-content/uploads/2025/02/象棋數字盤-e1738425815689.jpg" 
                         alt="象棋數字盤" 
                         class="chessboard-image"
                         style="width: 100%; max-width: 350px; border-radius: 6px; box-shadow: 0 2px 6px rgba(0,0,0,0.1);">
                </div>
                
                <p class="instruction-text" style="text-align: center; font-size: 13px; color: #666; margin-bottom: 8px; line-height: 1.3;">
                    請選擇你想抽取的棋子的位置（填數字）
                </p>
                
                <div class="number-inputs-container" style="display: flex; justify-content: space-between; gap: 4px; margin-bottom: 8px;">
                    <input type="number" id="number-1" class="number-input" placeholder="第1" min="1" max="32" inputmode="numeric" style="flex: 1; min-width: 0; padding: 8px 2px; text-align: center; border: 2px solid #ddd; border-radius: 6px; font-size: 16px;">
                    <input type="number" id="number-2" class="number-input" placeholder="第2" min="1" max="32" inputmode="numeric" style="flex: 1; min-width: 0; padding: 8px 2px; text-align: center; border: 2px solid #ddd; border-radius: 6px; font-size: 16px;">
                    <input type="number" id="number-3" class="number-input" placeholder="第3" min="1" max="32" inputmode="numeric" style="flex: 1; min-width: 0; padding: 8px 2px; text-align: center; border: 2px solid #ddd; border-radius: 6px; font-size: 16px;">
                    <input type="number" id="number-4" class="number-input" placeholder="第4" min="1" max="32" inputmode="numeric" style="flex: 1; min-width: 0; padding: 8px 2px; text-align: center; border: 2px solid #ddd; border-radius: 6px; font-size: 16px;">
                    <input type="number" id="number-5" class="number-input" placeholder="第5" min="1" max="32" inputmode="numeric" style="flex: 1; min-width: 0; padding: 8px 2px; text-align: center; border: 2px solid #ddd; border-radius: 6px; font-size: 16px;">
                </div>
                
                <div id="number-validation" class="validation-message" style="margin-bottom: 8px;"></div>

                <div class="button-group" style="gap: 10px;">
                    <button id="btn-back-numbers" class="btn btn-secondary">返回</button>
                    <button id="btn-submit-divination" class="btn btn-primary" disabled>開始抽卦</button>
                </div>
            </div>
        </div>

        <!-- 處理中頁面 -->
        <div id="page-processing" class="page" style="display: none;">
            <div class="loading-container">
                <div class="spinner"></div>
                <p class="loading-text">正在為您排卦...</p>
                <p class="loading-subtext">請稍候...</p>
            </div>
        </div>

        <!-- 結果顯示頁面 -->
        <div id="page-result" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title">✨ 以下是您抽到的卦</h1>
                <div class="divider"></div>
            </div>
            <div class="page-content">
                <div id="result-pieces" class="pieces-container">
                    <!-- 棋子將動態插入這裡 -->
                </div>
                <div class="result-question">
                    <p class="question-label">您的問題：</p>
                    <p id="result-question-text" class="question-text"></p>
                </div>
                <p class="result-notice">老師將於24小時內回覆您</p>
                <button id="btn-close" class="btn btn-primary">完成</button>
            </div>
        </div>

        <!-- 已使用頁面 -->
        <div id="page-already-used" class="page" style="display: none;">
            <div class="page-header">
                <h1 class="page-title warning">ℹ️ 該問題您已抽卦</h1>
                <div class="divider"></div>
            </div>
            <div class="page-content">
                <p class="info-text">以下是您之前的抽卦結果：</p>
                <div id="previous-pieces" class="pieces-container">
                    <!-- 之前的棋子將動態插入這裡 -->
                </div>
                <div class="result-question">
                    <p class="question-label">您的問題：</p>
                    <p id="previous-question-text" class="question-text"></p>
                </div>
                <button id="btn-close-used" class="btn btn-primary">回到聊天室</button>
            </div>
        </div>

        <!-- 錯誤頁面 -->
        <div id="page-error" class="page" style="display: none;">
            <div class="page-content error-content">
                <div class="error-icon">⚠️</div>
                <h2 class="error-title">發生錯誤</h2>
                <p id="error-message" class="error-text"></p>
                <button id="btn-retry" class="btn btn-secondary">重試</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/liff-init.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
